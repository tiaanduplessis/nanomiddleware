{"version":3,"file":"nanomiddleware.m.js","sources":["../src/index.js"],"sourcesContent":["\nclass Middleware {\n  constructor (fns) {\n    this.fns = []\n\n    if (fns) {\n      this.use(fns)\n    }\n  }\n\n  use (fn, {before = false} = {}) {\n    if (fn === undefined || fn === null) {\n      return\n    }\n\n    if (fn instanceof Middleware) {\n      this.use(fn.fns)\n      return\n    }\n\n    if (Array.isArray(fn)) {\n      fn.forEach(fn => this.use(fn))\n      return\n    }\n\n    if (fn.then || typeof fn === 'function') {\n      before ? this.fns.unshift(fn) : this.fns.push(fn)\n      return\n    }\n\n    before ? this.fns.unshift(() => fn) : this.fns.push(() => fn)\n  }\n\n  run (...args) {\n    return this.fns.reduce(chain, Promise.resolve(...args))\n  }\n}\n\nfunction chain (promise, task) {\n  return promise.then(task)\n}\n\nexport default Middleware\n"],"names":["Middleware","fns","use","chain","promise","task","then","fn","ref","undefined","Array","isArray","forEach","this","unshift","push","run","reduce","Promise","resolve","args"],"mappings":"AACA,IAAMA,EACJ,SAAaC,QACNA,OAEDA,QACGC,IAAID,IAgCf,SAASE,EAAOC,EAASC,GACvB,OAAOD,EAAQE,KAAKD,eA7BpBH,aAAKK,EAAIC,gEAAU,QACNC,IAAPF,GAA2B,OAAPA,IAIpBA,aAAcP,OACXE,IAAIK,EAAGN,KAIVS,MAAMC,QAAQJ,KACbK,iBAAQL,UAAMM,EAAKX,IAAIK,KAIxBA,EAAGD,MAAsB,mBAAPC,IACXM,KAAKZ,IAAIa,QAAQP,GAAMM,KAAKZ,IAAIc,KAAKR,KAIvCM,KAAKZ,IAAIa,0BAAcP,IAAMM,KAAKZ,IAAIc,uBAAWR,kBAG5DS,6EACSH,KAAKZ,IAAIgB,OAAOd,EAAOe,QAAQC,cAAQD,QAAGE"}